name: Perf

on:
  pull_request:
    branches: ["main"]

permissions:
  contents: read
  pull-requests: write

jobs:
  iai-callgrind:
    name: iai-callgrind PR Bench
    uses: terjekv/github-action-iai-callgrind/.github/workflows/iai-callgrind-pr-bench.yml@v1
    with:
      auto_discover: true
      feature_sets_json: >-
        [
          {"name":"default","features":""}
        ]
      regression_threshold_pct: 8
      fail_on_regression: true
